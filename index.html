<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="style.css"></link:src>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <title>Twist Chat</title>
  </head>
  <body>

    <!-- Navbar Start -->
    <nav class="navbar text-center navbar-light bg-light">
      <div class="container text-center">
        <a class="navbar-brand " href="#">
          <h1 class="text-center">Twist Chat</h1>
        </a>
      </div>
    </nav>
    
    <!-- Sidebar Start -->

    <form action="" onsubmit="return sendMessage(); Earse();">
      <div class="container">
        <div class="card p- mt-3 bg-dark text-light">
        <div class="p-2 card-body">
          <div class="message p-2" id="msg">

          </div>

          <div id="send" class="d-flex p-2 fixed-bottom" style="">
            <input type="text" placeholder="Say Hi âœŒ" id="messag" class="form-control">
            <input type="Submit" value="Send" id="btn"  class="">
          
          </div>

        </div>

    </div>      
      </div>

    
    </form>
    <!-- Sidebar Ends -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-database.js"></script>

    <script type="module">
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDqpZcLy3FTrlBUiNGoP2EMQjw4R9gV99k",
      authDomain: "trailll-8281a.firebaseapp.com",
      databaseURL: "https://trailll-8281a-default-rtdb.firebaseio.com",
      projectId: "trailll-8281a",
      storageBucket: "trailll-8281a.appspot.com",
      messagingSenderId: "1031691670615",
      appId: "1:1031691670615:web:0e0dd3c820b97a4acabf12"
    };
  
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);


    var db = firebase.database();

    function sendMessage(){
      var message = document.getElementById('messag').value
      
      db.ref("message").push().set({
        "message": message
      })
      console.log("Message Sent")
      return false
    }

    db.ref("message").on('child_added', function(snapshot){
      msg = ""
      msg += "<p>"
      msg += `<span class='bg-success rounded p-2' style='overflow-wrap: break-word'> ${snapshot.val().message} </span>`
      msg += "</p>"



document.getElementById('msg').innerHTML += msg      
    })

    var inpt = document.getElementById('btn')

    function Earse(){
      document.getElementById('messag').value = ''
    }


  </script>

    <!-- Incuding Bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
      integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js"
      integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy"
      crossorigin="anonymous"
    ></script>

    <!-- Include SideBars -->
    <script src="sidebar.js"></script>
  </body>
</html>
